<% content_for :title, @page_title %>
<% content_for :meta_description, @meta_description %>

<h1 class="articles-title"><%= t('articles.index.title') %></h1>

<% if @articles.any? %>
  <div class="articles">
    <% @articles.each do |article| %>
      <article class="article">
        <h2 class="article__title">
          <%= link_to article.title, article_path(article), class: "article-title-link" %>
        </h2>
        
        <div class="article__meta">
          <% if article.author_name.present? %>
            <span class="article__meta__author"><%= t('articles.by_author', author: article.author_name) %></span>
          <% end %>

          <% if article.published_at.present? %>
            &middot;
            <time class="article__meta__date" datetime="<%= article.published_at.iso8601 %>">
              <%= l(article.published_at.to_date, format: :long) %>
            </time>
          <% end %>
          
          <% if article.reading_time_minutes.present? %>
            &middot;
            <span class="article__meta__reading-time">
              <%= t('articles.reading_time', minutes: article.reading_time_minutes) %>
            </span>
          <% end %>

          <% if article.has_paywall? %>
            &middot;
            <span class="article-premium-badge">
              <%= t('articles.premium_content') %>
            </span>
          <% end %>

        </div>
        
        <div class="article-excerpt">
          <%= raw article.render_excerpt %>
        </div>
        
        <div class="article__actions">
          <%= link_to t('articles.read_more'), article_path(article), class: "button button--outline" %>
        </div>
      </article>

    <% end %>
  </div>
  
  <%= paginate @articles if respond_to?(:paginate) %>
<% else %>
  <div class="no-articles">
    <p><%= t('articles.index.no_articles') %></p>
  </div>
<% end %>