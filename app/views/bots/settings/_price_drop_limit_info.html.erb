<% if bot.price_drop_limited? && bot.price_drop_limit.present? %>
  <% ticker = bot.tickers.find_by(id: bot.price_drop_limit_in_ticker_id) %>
  <% high = ticker&.get_high_of_last(duration: bot.price_drop_limit_time_window_duration)&.data&.round(bot.decimals[:quote]) %>
  <% result = bot.get_price_drop_limit_condition_met? %>
  <% condition_met = result.success? && result.data %>
  <small id="<%= bot.new_record? ? "new-settings-price-drop-limit-info" : "settings-price-drop-limit-info" %>" class="small-info <%= condition_met ? "text-success" : "" %>">
    <%= t("bot.settings.extra_price_drop_limit.price_drop_info",
          base: ticker&.base_asset&.symbol,
          time_window_condition: t("bot.settings.extra_price_drop_limit.time_window_condition.#{bot.price_drop_limit_time_window_condition}"),
          condition_high: high,
          quote: bot.quote_asset.symbol) if high.present? %>
  </small>
<% end %>