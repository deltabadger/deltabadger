<%= turbo_frame_tag "asset-picker", data: { action: "keydown@window->arrow-keys-navigation#navigate", controller: "arrow-keys-navigation" }, class: "modal--search__assets selectable-options" do %>

  <%# FIXME: test spinner. %>
  <% if assets.blank? %>
    <%# This is just a placeholder to design the style, however it's shown even if no text is input in the form. To solve it I have to enable background tasks, that process the search and broadcast the results once ready. %>
    <div class="loader"></div>
  <% end %>

  <% assets.each do |id, symbol, name, exchange_names| %>
    <%= form_with model: bot, url: next_step_path, method: :get, data: { arrow_keys_navigation_target: "item" }, class: "modal--search__assets__item" do |f| %>
      <%= f.hidden_field asset_field, value: id %>
      <%= button_tag type: :submit, data: { arrow_keys_navigation_target: "button", turbo_frame: "modal_content" } do %>
        <div class="modal--search__cell modal--search__cell--ticker"><%= symbol %></div>
        <div class="modal--search__cell modal--search__cell--name">
          <%= name %>
        </div>
        <div class="modal--search__cell modal--search__cell--exchanges">
          <% exchange_names.each do |exchange_name| %>
            <%= render "svg/exchange-#{exchange_name.downcase}", title: exchange_name %>
          <% end %>
        </div>
      <% end %>
    <% end %>
  <% end %>

<% end %>