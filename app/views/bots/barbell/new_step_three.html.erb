<%= render 'layouts/modal/full_page' do %>
  <%= render partial: 'bots/barbell/progress_bar', locals: {
    current_step: :exchange
  } %>
  <div class="conversational conversational--bot-setup">Invest in <%= @bot.base0_asset.symbol %> and <%= @bot.base1_asset.symbol %> at â€¦</div>
<%= @bot.inspect%>
  <%= form_with model: @bot, url: barbell_new_step_four_bots_path, method: :get, id: "exchange_select", class: "flex-row", data: { controller: "form--submit" } do |f| %>
    <div class="sinput sinput--select"></div>
      <%= f.hidden_field :label, value: @bot.label %>
      <%= f.hidden_field :base0_asset_id, value: @bot.base0_asset_id %>
      <%= f.hidden_field :base1_asset_id, value: @bot.base1_asset_id %>
      <%= f.hidden_field :quote_asset_id, value: @bot.quote_asset_id %>
      <%= @bot.exchange&.name&.capitalize || t('bot.pick_exchange') %>
      <% exchange_options = [[t('bot.pick_exchange'), nil]] + @bot.available_exchanges_for_current_settings.map { |e| [e.name.capitalize, e.id] } %>
      <%= f.select :exchange_id, exchange_options, { selected: @bot.exchange_id }, data: { action: "change->form--submit#submit", turbo_frame: "modal_content"} %>
    </div>

    <%# if @bot.exchange.present? && !@bot.api_key.correct? %>
      <%#= link_to t('bot.add_api_keys', exchange: @bot.exchange.name.capitalize), new_api_key_bot_path(@bot), class: "button button--success", data: { turbo_frame: "modal" } %>
    <%# end %>

  <% end %>
<% end %>
