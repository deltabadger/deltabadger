<% pnl = bot.barbell? ? bot.fetch_metrics[:pnl] : 0 %>
<% path = bot.barbell? ? barbell_bot_path(bot) : dashboard_bot_path(bot) %>

<div class="widget bot-tile">
  <%= link_to path do %>
    <div class="bot-tile__header">
      <div class="bot-tile__hgroup">
        <div class="bot-tile__title">
          <% if bot.barbell? && bot.quote.present? && bot.base0.present? && bot.base1.present? %>
            <span>
              <span><%= bot.base1 %></span>,
              <span><%= bot.base0 %></span>
            </span>
            &larr;
            <span><%= bot.quote %></span>
          <% elsif bot.basic? && bot.quote.present? && bot.base.present? %>
            <span><%= bot.base %></span>
            &larr;
            <span><%= bot.quote %></span>
          <% elsif bot.withdrawal? && bot.currency.present? %>
            <%= bot.currency %>
          <% elsif bot.webhook? && bot.base.present? %>
            <span><%= bot.base %></span>
          <% end %>
          <%= "Â· #{bot.exchange.name}" if bot.exchange.present? %>
          <%# bot_type_label(bot) %>
        </div>
        <div class="bot-tile__subtitle">
          <%= bot.label %>
          
        </div>
      </div>
      <div class="bot-tile__pnl text-danger">
        <span class="widget__pnl__value"><%= format_percent(pnl, precision: 2) %></span>
      </div>
    </div>
  <% end %>
  <% if bot.barbell? %>
    <div class="bot-control">
      <div class="bot-control__status active">
        <%= render "barbell_bots/status/status_bar", bot: bot %>
      </div>
      <%= render "barbell_bots/status/status_button", bot: bot %>
    </div>
  <% end %>
</div>