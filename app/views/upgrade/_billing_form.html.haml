- if upgrade_presenter.upgrade_available?
  .modal-dialog.m-0(style="max-width: 100%")
    .modal-content
      .modal-body
        %ul#payTab.nav.nav-tabs{:role => "tablist"}
          %li.nav-item
            %a#stats-tab.nav-link.active{"aria-controls" => "payBitcoin", "aria-selected" => "true", "data-toggle" => "tab", :href => "#payBitcoin", :role => "tab"} Bitcoin
          %li.nav-item
            %a#log-tab.nav-link{"aria-controls" => "payCC", "aria-selected" => "true", "data-toggle" => "tab", :href => "#payCC", :role => "tab"} Wire Transfer
        #payTabContent.tab-content
          #payBitcoin.tab-pane.show.active{"aria-labelledby" => "stats-tab", :role => "tabpanel"}
            %h5.mb-4 Billing information
            = form_for payment, url: upgrade_pay_path do |f|
              - if errors.present?
                %ul.pl-3
                  - errors.each do |error|
                    %li.text-danger= error

              - if 'investor'.in?(upgrade_presenter.available_plans)
                - investor_selected = upgrade_presenter.selected_plan_name == 'investor'
                %input.db-plan-radio{type: 'radio', id: 'payment_plan_investor', name: 'payment[subscription_plan_id]', value: upgrade_presenter.investor_plan.id, checked: investor_selected}
              - if 'hodler'.in?(upgrade_presenter.available_plans)
                - hodler_selected = upgrade_presenter.selected_plan_name == 'hodler'
                %input.db-plan-radio{type: 'radio', id: 'payment_plan_hodler', name: 'payment[subscription_plan_id]', value: upgrade_presenter.hodler_plan.id, checked: hodler_selected}

              .db-form__row
                = f.text_field :first_name, class: 'db-form__input', value: "", autocomplete: "given-name", onchange: 'this.setAttribute("value", this.value);'
                = f.label :first_name, 'Name', class: 'db-form__label'


              .db-form__row
                = f.text_field :last_name, class: 'db-form__input', value: "", autocomplete: "family-name", onchange: 'this.setAttribute("value", this.value);'
                = f.label :last_name, 'Surname', class: 'db-form__label'


              .db-form__row
                = f.date_field :birth_date, value: "", autocomplete: "bday", class: 'db-form__input db-form__input--date', onchange: 'this.setAttribute("value", this.value);'
                = f.label :birth_date, class: 'db-form__label'


              .db-form__row
                = f.select :country, nil, {}, value: "", autocomplete: "country-name", class: 'db-form__input db-form__input--select', onchange: 'this.setAttribute("value", this.value);', onfocus: 'this.setAttribute("value", this.value);' do
                  - cost_presenters.each do |country, presenter|
                    - selected = country == payment.country
                    = content_tag :option, country, value: country, selected: selected, data: { ibp: presenter[:investor].base_price, hbp: presenter[:hodler].base_price, ifd: presenter[:investor].flat_discount, hfd: presenter[:hodler].flat_discount, idp:presenter[:investor].flat_discounted_price, hdp:presenter[:hodler].flat_discounted_price, idpa: presenter[:investor].discount_percent_amount, hdpa: presenter[:hodler].discount_percent_amount, vp: presenter[:investor].vat_integer, itv: presenter[:investor].total_vat, htv: presenter[:hodler].total_vat, itp: presenter[:investor].total_price, htp: presenter[:hodler].total_price }
                = f.label :country, class: 'db-form__label'

              .db-form__row.db-form__row--final-button
                %button.btn.btn-success.btn-lg.w-100.px-1{type: 'submit'}
                  %span.mr-0 Pay with Bitcoin
                  %svg.ml-1{class: 'db-bot__svg-icon db-svg-icon db-svg-icon--arrow-forward', xmlns: 'http://www.w3.org/2000/svg', width: '24', viewBox: '0 0 24 24'}
                    %path{d: 'M5 13h11.2l-5 4.9a1 1 0 000 1.4c.5.4 1.1.4 1.5 0l6.6-6.6c.4-.4.4-1 0-1.4l-6.6-6.6a1 1 0 10-1.4 1.4l4.9 4.9H5c-.6 0-1 .5-1 1s.5 1 1 1z'}

          #payCC.tab-pane{"aria-labelledby" => "log-tab", :role => "tabpanel"}
            To pay with a wire transfer, send a basic info for the invoice: <b>name</b>, <b>surname</b>, <b>physical address</b>, <b>email</b> used at Deltabadger, and the plan you want buy: <a href="mailto:sales@deltabadger.com">sales@deltabadger.com</a>.
