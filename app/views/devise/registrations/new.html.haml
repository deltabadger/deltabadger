- profit_calculator = GetDcaProfit.new
- today = Date.today
.container.container--signup
  .row
    .d-none.d-lg-block.col-lg-6.col-xl-7.db-signup--text
      %h3.mb-5.mt-4.pt-2= t('ads.dca_profit_html', profit: profit_calculator.call(today - 365, today).data.to_i)

      .db-signup__list
        - t('ads.features').split(';').each do |feature|
          .db-signup__list--item.mb-4
            .material-icons-round check
            .ml-2= raw feature

    .col-12.col-sm-10.col-md-8.offset-sm-1.offset-md-2.offset-lg-0.col-lg-6.col-xl-5
      .modal-dialog
        .modal-content
          .modal-body
            %h3.db-modal-title= t('.title_html')

            = form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f|
              - if @code_present
                = render partial: 'ref_codes/show', locals: { affiliate: @affiliate }


              .db-form__row.db-form__row--input
                = f.email_field :email, autofocus: true, autocomplete: "email", value: "", class: "db-form__input", onchange: 'this.setAttribute("value", this.value);'

                .db-form__info.db-form__info--invalid
                  -if @email_in_use
                    #{@email_in_use}
                    = link_to t('links.log_in'), new_session_path(resource_name)
                  -elsif @email_suggestion
                    = t('.email_suggestion_html', suggestion: @email_suggestion)
                  -else
                    = t('.email_invalid')
                = f.label :email, class: "db-form__label"


              .db-form__row.db-has-unmask(onselectstart="return false;")
                = f.password_field :password, autocomplete: "new-password", value: "", class: "db-form__input db-form__input--has-icon", onchange: 'this.setAttribute("value", this.value);', id: "passwordInput"

                - if @minimum_password_length
                  .db-form__info.db-form__info--invalid
                    = t('forms.minimum_length', length: @minimum_password_length)
                = f.label :password, class: "db-form__label"

                .db-unmask{:onclick => "unmaskPassword()"}
                  = render "layouts/svg_mi_visibility"
                  = render "layouts/svg_mi_visibility-off"
                :javascript
                  function unmaskPassword() {
                    var x = document.getElementById("passwordInput");
                    if (x.type === "password") {
                      x.type = "text";
                    } else {
                      x.type = "password";
                    }
                  }

              .db-form__row.db-form__row--check
                = f.check_box :terms_and_conditions, class: "form-check-input d-none", checked: "checked"
                = f.label :terms_and_conditions, class: "form-check-label" do
                  = raw t('helpers.label.user.terms_and_conditions_tooltip',
                           terms_and_conditions: link_to(t('links.terms_and_conditions'), terms_and_conditions_path),
                           privacy_policy: link_to(t('links.privacy_policy'), privacy_policy_path))

              .db-form__row.db-form__row--final-button
                = invisible_recaptcha_tags text: t('.submit'), class: "btn btn-success btn-lg w-100"
            .db-form__other-links
              = render "devise/shared/links"
