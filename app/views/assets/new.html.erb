<%= render 'layouts/turbo_modal' do %>
  <%= form_with url: new_portfolio_asset_path(@portfolio), method: :get, data: { controller: "form-submission", turbo_frame: "asset-picker" } do |form| %>
    <%= form.text_field :query, autofocus: true, data: { action: "input->form-submission#submit", form_key_press_target: "input" } %>
  <% end %>
  <%= turbo_frame_tag "asset-picker", data: { action: "turbo:submit-end->modals#submitEnd" } do %>
    <% @query_assets.each do |asset| %>
      <%= form_with model: asset, url: portfolio_assets_path(@portfolio), data: { turbo_frame: "portfolio-assets" } do |form| %>
        <%= asset.category %>
        <%= asset.ticker %>
        <%= asset.name %>
        <%= form.hidden_field :ticker, value: asset.ticker %>
        <%= form.hidden_field :name, value: asset.name %>
        <%= form.hidden_field :category, value: asset.category %>
        <%= form.hidden_field :color, value: asset.color %>
        <%= form.submit "Add" %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
