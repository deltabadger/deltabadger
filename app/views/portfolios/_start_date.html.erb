<%= turbo_frame_tag "start-date" do %>
  <%= form_with model: portfolio, url: portfolio_update_backtest_start_date_path(portfolio), method: :patch, html: { onchange: "requestSubmit();" }, data: { controller: "flatpickr", flatpickr_lang_value: params[:lang], flatpickr_max_date_value: Time.now.utc - 2.days } do |form| %>
    <%= form.label :backtest_start_date, "Backtest since:", class: "label" %>
    <%= form.text_field :backtest_start_date, class: "fp_date sinput sinput--calendar" %>

    <%= button_to "5Y", portfolio_update_backtest_start_date_path(portfolio, { portfolio: { backtest_start_date: 5.year.ago.strftime('%Y-%m-%d') } }), method: :patch %>
    <%= button_to "3Y", portfolio_update_backtest_start_date_path(portfolio, { portfolio: { backtest_start_date: 3.years.ago.strftime('%Y-%m-%d') } }), method: :patch %>
    <%= button_to "1Y", portfolio_update_backtest_start_date_path(portfolio, { portfolio: { backtest_start_date: 1.years.ago.strftime('%Y-%m-%d') } }), method: :patch %>
    <%= button_to "YTD", portfolio_update_backtest_start_date_path(portfolio, { portfolio: { backtest_start_date: Date.today.beginning_of_year.strftime('%Y-%m-%d') } }), method: :patch %>

  <% end %>
<% end %>
