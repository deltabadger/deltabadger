<% selected_options = portfolio.compare_to_selected_options.map { |label, color, id| [fill_default_portfolio_label(label), fill_default_portfolio_color(color), id] } %>
<% select_options = portfolio.compare_to_select_options.map { |label, id| [fill_default_portfolio_label(label), id] } %>
<div class="multiselect mt-5">
  <% selected_options.each do |label, color, id| %>
    <%= tag.div class: "tag", style: "background: #{color}" do %>
      <%= label %>
      <%= button_to portfolio_update_compare_to_path(portfolio), method: :patch, data: { turbo_frame: "backtest-results" }, class: "tag__remove", params: {compare_to_id: id} do %>
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5.5 5.5L10.5 10.5M5.5 10.5L10.5 5.5" stroke="#fff" stroke-width="1.5" stroke-linecap="square"></path>
        </svg>
      <% end %>
    <% end %>
  <% end %>
  <div data-controller="dropdown" data-action="click->dropdown#toggle" data-dropdown-target="wrapper" class="sbutton sbutton--link dropdown-wrapper">
    <%# t('analyzer.compare') %>
    Compare +
    <div class="dropdown">
      <% select_options.each do |label, id| %>
        <%= button_to label, portfolio_update_compare_to_path(portfolio), method: :patch, data: { turbo_frame: "backtest-results" }, class: "dropdown__item", params: {compare_to_id: id} %>
      <% end %>
    </div>
  </div>
</div>



<%# sample template %>

<div class="multiselect mt-5">
  <div class="tag" style="background: #05a">
    3-Fund Portfolio
    <button class="tag__remove" data-action="click->dropdown#remove">
      <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M5.5 5.5L10.5 10.5M5.5 10.5L10.5 5.5" stroke="#fff" stroke-width="1.5" stroke-linecap="square"></path>
      </svg>
    </button>
  </div>
  <div class="tag" style="background: #d02">
    All-weather Portfolio
    <button class="tag__remove" data-action="click->dropdown#remove">
      <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M5.5 5.5L10.5 10.5M5.5 10.5L10.5 5.5" stroke="#fff" stroke-width="1.5" stroke-linecap="square"></path>
      </svg>
    </button>
  </div>

  <div data-controller="dropdown" data-action="click->dropdown#toggle" data-dropdown-target="wrapper" class="sbutton sbutton--link dropdown-wrapper">
    Compare +

    <div class="dropdown">
      <a class="dropdown__item" data-turbo-frame="portfolio" href="/en/portfolio-analyzer/7">mDM IKZE</a>
      <a class="dropdown__item" data-turbo-frame="portfolio" href="/en/portfolio-analyzer/8">Binance</a>
      <a class="dropdown__item" data-turbo-frame="portfolio" href="/en/portfolio-analyzer/15">Magnificent 7</a>
      <a class="dropdown__item" data-turbo-frame="portfolio" href="/en/portfolio-analyzer/16">Test new</a>
      <a class="dropdown__item" data-turbo-frame="portfolio" href="/en/portfolio-analyzer/17">Diversified Portfolio</a>
    </div>
  </div>
</div>

<%# sample template %>
