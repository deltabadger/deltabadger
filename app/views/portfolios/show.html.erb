<div class="columns">
  <div class="column gap-6">

    <%= render "smart_allocation_controls", portfolio: @portfolio %>

    <%# render "empty", portfolio: @portfolio %>
    <%= tag.div id: "portfolio-assets", class: "basket" do %>
      <% @portfolio.assets.order(:id).each do |asset| %>
        <%= render 'assets/asset', asset: asset %>
      <% end %>
    <% end %>
  
    <div class="label">Those assets neither lower Volatility nor increase Sharpe Ratio of your portfolio:</div>

    <div id="asset_111">
      <div class="basket__asset smart-allocation---off">
        <form class="basket__asset__form">
          <div class="ticker-input ticker-input--percentage">
            <input value="0" disabled="disabled" class="numeric-input iu-numeric iu-char-limit" type="text">
            <span>%</span>
            <div class="ticker" style="background: #048;">
              DEL
            </div>
          </div>
          <div class="slider">
            <input step="0.01" value="0.0" class="slider__input" disabled="disabled" min="0.0" max="1.0" type="range">
            <div class="slider__style">
              <div class="slider__style__track" style="border-left-color: #f7931a;">
                <div class="slider__style__progress" style="width: 0.0%; background: #f7931a;">
                  <div class="slider__style__thumb" style="background: #f7931a;">
                  </div>
                </div>
              </div>        
            </div>
          </div>
        </form>    
        <form class="button_to">
          <button class="basket__remove__icon icon-20" style="background: none; border: none; padding: 0;" type="submit">
            <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M5.5 5.5L10.5 10.5M5.5 10.5L10.5 5.5" stroke="#8894B6" stroke-width="1.5" stroke-linecap="square"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>

    <div class="flex-row space-between" data-controller="form-key-press">

      <%= link_to new_portfolio_asset_path(@portfolio), class: "sbutton sbutton--add-asset", data: { turbo_frame: "modal", form_key_press_target: "button" } do %>
          <svg class="basket__remove__icon icon-24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4 12H20H4Z"/>
            <path d="M4 12H20" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 4V20V4Z"/>
            <path d="M12 4V20" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
      <% end %>
      <%= render "normalize", portfolio: @portfolio %>

    </div>
  </div>

  <div class="column gap-1">
    <div class="flex-row space-between wrap gap-1">
      <div class="flex-row">
        <%= render "strategy_select", portfolio: @portfolio %>
        <span class="label"><%= t('analyzer.since') %></span>
        <%= render "start_date", portfolio: @portfolio %>
      </div>
      <button class="sbutton sbutton--success">
          <%= t('analyzer.get_ai_insights') %>
          <svg class="icon-24" style="position: relative; margin-right: -0.75rem; top: -.05rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.6 9.3-.8-2.7a.9.9 0 0 0-1.6 0l-.8 2.7c-.2.3-.5.6-.9.6H7c-.9 0-1.2 1.1-.5 1.6l2.1 1.7c.3.2.4.6.3 1L8 16.8c-.3.8.7 1.5 1.3 1l2.2-1.6a1 1 0 0 1 1 0l2.2 1.6c.6.5 1.6-.2 1.3-1l-.8-2.6a1 1 0 0 1 .3-1l2.1-1.7c.7-.5.4-1.6-.5-1.6h-2.6a.9.9 0 0 1-.9-.6Z" /></svg>
      </button>
    </div>
    <%# render "insights" %>
    <%= render "backtest_results", backtest: @backtest %>
    <div class="flex-row gap-2 wrap space-between">
      <%= render "risk_free_rate", portfolio: @portfolio %>
      <%= render "benchmark_select", portfolio: @portfolio %>
    </div>
  </div>
</div>
